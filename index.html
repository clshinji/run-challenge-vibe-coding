<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>„Ç≠„ÉÉ„Ç∫„Ç¢„Éâ„Éô„É≥„ÉÅ„É£„Éº - Ê®™„Çπ„ÇØ„É≠„Éº„É´„Ç≤„Éº„É†</title>
    <link rel="stylesheet" href="css/style.css" />
    <link rel="stylesheet" href="css/responsive.css" />
  </head>
  <body>
    <!-- „Ç≤„Éº„É†„Ç≥„É≥„ÉÜ„Éä -->
    <div id="gameContainer">
      <!-- „Çø„Ç§„Éà„É´ÁîªÈù¢ -->
      <div id="titleScreen" class="screen active">
        <h1>„Ç≠„ÉÉ„Ç∫„Ç¢„Éâ„Éô„É≥„ÉÅ„É£„Éº</h1>
        <div class="character-preview"></div>

        <!-- „Éó„É¨„Ç§„É§„ÉºÂêçË°®Á§∫„Ç®„É™„Ç¢ -->
        <div id="playerNameDisplay" class="player-name-display">
          <div class="player-name-label">„Å™„Åæ„Åà:</div>
          <div id="currentPlayerName" class="current-player-name">
            „Å™„Åæ„Åà„Åå„Å™„ÅÑ„Çà
          </div>
          <button id="editPlayerNameButton" class="game-button secondary">
            „Å™„Åæ„Åà„Çí„Åã„Åà„Çã
          </button>
        </div>

        <div class="menu-buttons">
          <button id="startButton" class="game-button">„Ç≤„Éº„É†„Çπ„Çø„Éº„Éà</button>
          <button id="playerListButton" class="game-button">
            „Éó„É¨„Ç§„É§„Éº„ÅÑ„Å°„Çâ„Çì
          </button>
          <button id="statsButton" class="game-button">„Åõ„ÅÑ„Åõ„Åç</button>
          <button id="settingsButton" class="game-button">„Åõ„Å£„Å¶„ÅÑ</button>
        </div>
      </div>

      <!-- „É¶„Éº„Ç∂„ÉºÂêçÂÖ•ÂäõÁîªÈù¢ -->
      <div id="nameInputScreen" class="screen">
        <h2>„Å™„Åæ„Åà„Çí„ÅÑ„Çå„Å¶„Å≠</h2>
        <input
          type="text"
          id="playerNameInput"
          placeholder="„Å™„Åæ„Åà"
          maxlength="10"
        />
        <div class="menu-buttons">
          <button id="nameConfirmButton" class="game-button">OK</button>
          <button id="nameBackButton" class="game-button secondary">
            „ÇÇ„Å©„Çã
          </button>
        </div>
      </div>

      <!-- „Éó„É¨„Ç§„É§„ÉºÂêçÁ∑®ÈõÜÁîªÈù¢ -->
      <div id="editNameScreen" class="screen">
        <h2>„Å™„Åæ„Åà„Çí„Åã„Åà„Çã</h2>

        <!-- ÁèæÂú®„ÅÆÊÉÖÂ†±Ë°®Á§∫ -->
        <div class="current-player-info">
          <div class="current-name-info">
            <span>„ÅÑ„Åæ„ÅÆ„Å™„Åæ„Åà: </span>
            <span id="currentNameInEdit" class="current-name-text">Êú™Ë®≠ÂÆö</span>
          </div>
          <div class="current-icon-info">
            <span>„ÅÑ„Åæ„ÅÆ„Ç¢„Ç§„Ç≥„É≥: </span>
            <span id="currentIconInEdit" class="current-icon-display-small"
              >üê±</span
            >
          </div>
        </div>

        <!-- ÂêçÂâçÂÖ•Âäõ -->
        <input
          type="text"
          id="editPlayerNameInput"
          placeholder="„ÅÇ„Åü„Çâ„Åó„ÅÑ„Å™„Åæ„Åà"
          maxlength="10"
        />

        <!-- „Ç¢„Ç§„Ç≥„É≥ÈÅ∏Êäû -->
        <div class="edit-icon-section">
          <div class="edit-icon-label">„Ç¢„Ç§„Ç≥„É≥„Çí„Åà„Çâ„Çì„Åß„Å≠:</div>
          <div class="edit-icon-grid" id="editIconGrid">
            <!-- „Ç¢„Ç§„Ç≥„É≥„ÅØÂãïÁöÑ„Å´ÁîüÊàê -->
          </div>
        </div>

        <div class="menu-buttons">
          <button id="confirmEditNameButton" class="game-button">„Åã„Åà„Çã</button>
          <button id="cancelEditNameButton" class="game-button secondary">
            „ÇÇ„Å©„Çã
          </button>
        </div>
      </div>

      <!-- „Éó„É¨„Ç§„É§„Éº‰∏ÄË¶ßÁîªÈù¢ -->
      <div id="playerListScreen" class="screen">
        <h2>„Éó„É¨„Ç§„É§„Éº„ÅÑ„Å°„Çâ„Çì</h2>

        <!-- ÁèæÂú®„ÅÆ„Éó„É¨„Ç§„É§„ÉºË°®Á§∫ -->
        <div class="current-player-display">
          <div class="current-player-label">„ÅÑ„Åæ„ÅÆ„Éó„É¨„Ç§„É§„Éº:</div>
          <div class="current-player-info">
            <span id="playerListCurrentPlayerIcon" class="current-player-icon"
              >üê±</span
            >
            <span id="playerListCurrentPlayerName" class="current-player-name"
              >Êú™Ë®≠ÂÆö</span
            >
          </div>
        </div>

        <div class="player-list-container">
          <div id="playerList" class="player-list">
            <!-- „Éó„É¨„Ç§„É§„Éº„Ç´„Éº„Éâ„ÅØÂãïÁöÑ„Å´ÁîüÊàê -->
          </div>
        </div>
        <div class="menu-buttons">
          <button id="addNewPlayerButton" class="game-button">
            „ÅÇ„Åü„Çâ„Åó„ÅÑ„Éó„É¨„Ç§„É§„Éº
          </button>
          <button id="playerListBackButton" class="game-button secondary">
            „ÇÇ„Å©„Çã
          </button>
        </div>
      </div>

      <!-- „Ç¢„Ç§„Ç≥„É≥ÈÅ∏ÊäûÁîªÈù¢ -->
      <div id="iconSelectScreen" class="screen">
        <h2>„Ç¢„Ç§„Ç≥„É≥„Çí„Åà„Çâ„Çì„Åß„Å≠</h2>
        <div class="current-icon-display">
          <div class="current-icon-label">„ÅÑ„Åæ„ÅÆ„Ç¢„Ç§„Ç≥„É≥:</div>
          <div id="currentIconDisplay" class="current-icon">üê±</div>
        </div>
        <div class="icon-grid" id="iconGrid">
          <!-- „Ç¢„Ç§„Ç≥„É≥„ÅØÂãïÁöÑ„Å´ÁîüÊàê -->
        </div>
        <div class="menu-buttons">
          <button id="iconSelectBackButton" class="game-button secondary">
            „ÇÇ„Å©„Çã
          </button>
        </div>
      </div>

      <!-- „Çπ„ÉÜ„Éº„Ç∏ÈÅ∏ÊäûÁîªÈù¢ -->
      <div id="stageSelectScreen" class="screen">
        <h2>„Çπ„ÉÜ„Éº„Ç∏„Çí„Åà„Çâ„Çì„Åß„Å≠</h2>
        <div id="stageButtons" class="stage-grid">
          <!-- „Çπ„ÉÜ„Éº„Ç∏„Éú„Çø„É≥„ÅØÂãïÁöÑ„Å´ÁîüÊàê -->
        </div>
        <button id="stageBackButton" class="game-button secondary">
          „ÇÇ„Å©„Çã
        </button>
      </div>

      <!-- „Ç≤„Éº„É†ÁîªÈù¢ -->
      <div id="gameScreen" class="screen">
        <!-- Áµ±Âêà„Ç§„É≥„Éï„Ç©„É°„Éº„Ç∑„Éß„É≥„Ç®„É™„Ç¢ -->
        <div id="gameUI">
          <div id="integratedInfoArea" class="integrated-info-area">
            <!-- Êàª„Çã„Éú„Çø„É≥ -->
            <button id="backToStageButton" class="back-button">
              <span class="back-icon">üè†</span>
              <span class="back-text">„ÇÇ„Å©„Çã</span>
            </button>

            <!-- „É°„Ç§„É≥ÊÉÖÂ†±„Éê„Éº -->
            <div class="main-info-bar">
              <!-- Â∑¶ÂÅ¥Ôºö„Çπ„Ç≥„Ç¢„Å®„É¨„Éô„É´ -->
              <div class="info-group left-group">
                <div class="info-item score-item">
                  <div class="info-icon">‚≠ê</div>
                  <div class="info-content">
                    <div class="info-label">„Çπ„Ç≥„Ç¢</div>
                    <div class="info-value" id="score">0</div>
                  </div>
                </div>
                <div class="info-item level-item">
                  <div class="info-icon">üéØ</div>
                  <div class="info-content">
                    <div class="info-label" id="levelLabel">„É¨„Éô„É´ 1</div>
                    <div class="info-value level-ability" id="levelAbility">
                      „ÉÄ„Éñ„É´„Ç∏„É£„É≥„Éó
                    </div>
                  </div>
                </div>
              </div>

              <!-- ‰∏≠Â§ÆÔºö„Éó„É≠„Ç∞„É¨„Çπ„Éê„Éº -->
              <div class="info-group center-group">
                <div class="progress-section">
                  <div class="progress-header">
                    <span class="progress-label">„ÅÇ„Å§„ÇÅ„Åü „Ç¢„Ç§„ÉÜ„É†</span>
                    <span class="progress-count" id="progressCount">0/7</span>
                  </div>
                  <div class="progress-container">
                    <div class="progress-fill" id="progressFill"></div>
                    <div class="progress-stars">‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ‚òÜ</div>
                  </div>
                </div>
              </div>

              <!-- Âè≥ÂÅ¥ÔºöÊôÇÈñì„Å®„É©„Ç§„Éï -->
              <div class="info-group right-group">
                <div class="info-item time-item">
                  <div class="info-icon">‚è∞</div>
                  <div class="info-content">
                    <div class="info-label">„Åò„Åã„Çì</div>
                    <div class="info-value" id="time">0</div>
                  </div>
                </div>
                <div class="info-item lives-item">
                  <div class="info-icon">‚ù§Ô∏è</div>
                  <div class="info-content">
                    <div class="info-label">„É©„Ç§„Éï</div>
                    <div class="info-value hearts-container" id="hearts"></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- „Ç≤„Éº„É†„Ç≠„É£„É≥„Éê„Çπ -->
        <canvas id="gameCanvas" width="800" height="400"></canvas>

        <!-- „Çø„ÉÉ„ÉÅÊìç‰ΩúÁî®„Ç≥„É≥„Éà„É≠„Éº„É´Ôºà„Éê„Éº„ÉÅ„É£„É´„Éë„ÉÉ„ÉâÔºâ -->
        <div id="touchControls" class="touch-controls">
          <div id="virtualPad" class="virtual-pad">
            <div class="pad-background"></div>
            <div class="pad-stick"></div>
          </div>
          <div class="control-right">
            <button id="jumpButton" class="control-button jump">
              „Ç∏„É£„É≥„Éó
            </button>
          </div>
        </div>
      </div>

      <!-- ‰∏ÄÊôÇÂÅúÊ≠¢ÁîªÈù¢ -->
      <div id="pauseScreen" class="screen overlay">
        <div class="pause-menu">
          <h2>„ÅÑ„Å°„Åò„Å¶„ÅÑ„Åó</h2>
          <div class="menu-buttons">
            <button id="resumeButton" class="game-button">„Å§„Å•„Åë„Çã</button>
            <button id="restartButton" class="game-button">„Åï„ÅÑ„Çπ„Çø„Éº„Éà</button>
            <button id="pauseBackButton" class="game-button secondary">
              „É°„Éã„É•„Éº„Å∏
            </button>
          </div>
        </div>
      </div>

      <!-- „Ç≤„Éº„É†„ÇØ„É™„Ç¢ÁîªÈù¢ -->
      <div id="clearScreen" class="screen overlay">
        <div class="result-menu">
          <h2>„Çπ„ÉÜ„Éº„Ç∏„ÇØ„É™„Ç¢ÔºÅ</h2>
          <div class="result-stats">
            <p>„Çπ„Ç≥„Ç¢: <span id="clearScore">0</span></p>
            <p>„Çø„Ç§„É†: <span id="clearTime">0</span>Áßí</p>
            <p>„Ç¢„Ç§„ÉÜ„É†: <span id="clearItems">0</span>ÂÄã</p>
          </div>
          <div class="menu-buttons">
            <button id="nextStageButton" class="game-button">
              „Å§„Åé„ÅÆ„Çπ„ÉÜ„Éº„Ç∏„Å∏
            </button>
            <button id="clearBackButton" class="game-button secondary">
              „ÇÇ„Å©„Çã
            </button>
          </div>
        </div>
      </div>

      <!-- „Ç≤„Éº„É†„Ç™„Éº„Éê„ÉºÁîªÈù¢ -->
      <div id="gameOverScreen" class="screen overlay">
        <div class="result-menu">
          <h2>„Åñ„Çì„Å≠„Çì...</h2>
          <p>„ÇÇ„ÅÜ„ÅÑ„Å°„Å© „Å°„Çá„ÅÜ„Åõ„Çì„Åó„Å¶„Åø„Çà„ÅÜÔºÅ</p>
          <div class="menu-buttons">
            <button id="retryButton" class="game-button">„ÇÇ„ÅÜ„ÅÑ„Å°„Å©</button>
            <button id="gameOverBackButton" class="game-button secondary">
              „Çπ„ÉÜ„Éº„Ç∏„Åõ„Çì„Åü„Åè
            </button>
          </div>
        </div>
      </div>

      <!-- Áµ±Ë®à„Éª„ÉÄ„ÉÉ„Ç∑„É•„Éú„Éº„ÉâÁîªÈù¢ -->
      <div id="statsScreen" class="screen">
        <div class="stats-screen-header">
          <h2>„Åõ„ÅÑ„Åõ„Åç</h2>
        </div>

        <div class="stats-content-wrapper">
          <!-- Á∑èÂêà„Çπ„Ç≥„Ç¢Ë°®Á§∫ -->
          <div class="stats-summary">
            <div class="stats-summary-header">
              <div class="score-label">„Åù„ÅÜ„Åî„ÅÜ„Çπ„Ç≥„Ç¢</div>
            </div>
            <div class="stats-summary-content">
              <div class="total-score-display">
                <div id="totalScoreValue" class="score-value">0</div>
                <div class="score-progress">
                  <div id="totalScoreBar" class="progress-bar">
                    <div class="progress-fill"></div>
                  </div>
                  <div class="progress-text">
                    „É¨„Éô„É´ <span id="playerLevel">1</span>
                  </div>
                  <div class="level-info">
                    <div class="current-level">
                      „Åí„Çì„Åñ„ÅÑ„ÅÆ„É¨„Éô„É´: <span id="currentLevelText">1</span>
                    </div>
                    <div class="next-level">
                      „Å§„Åé„ÅÆ„É¨„Éô„É´„Åæ„Åß:
                      <span id="nextLevelPoints">1000</span>„Å¶„Çì
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- „Çπ„ÉÜ„Éº„Ç∏Âà•ÊàêÁ∏æ -->
          <div class="stage-stats">
            <h3>„Çπ„ÉÜ„Éº„Ç∏„Åπ„Å§„Åõ„ÅÑ„Åõ„Åç</h3>
            <div id="stageStatsContainer" class="stage-stats-grid">
              <!-- ÂãïÁöÑ„Å´ÁîüÊàê -->
            </div>
          </div>

          <!-- ÊúÄËøë„ÅÆÊàêÁ∏æ„Ç∞„É©„Éï -->
          <div class="recent-stats">
            <h3>„Åï„ÅÑ„Åç„Çì„ÅÆ„Åõ„ÅÑ„Åõ„Åç</h3>
            <div id="recentStatsChart" class="stats-chart">
              <!-- „Ç∞„É©„Éï„Ç®„É™„Ç¢ -->
            </div>
          </div>

          <div class="menu-buttons">
            <button id="statsBackButton" class="game-button secondary">
              „ÇÇ„Å©„Çã
            </button>
          </div>
        </div>
      </div>
      <div id="settingsScreen" class="screen">
        <h2>„Åõ„Å£„Å¶„ÅÑ</h2>
        <div class="settings-options">
          <div class="setting-item">
            <label>„Åä„Çì„Åå„Åè</label>
            <button id="musicToggle" class="toggle-button">ON</button>
          </div>
          <div class="setting-item">
            <label>„Åì„ÅÜ„Åã„Åä„Çì</label>
            <button id="soundToggle" class="toggle-button">ON</button>
          </div>
          <div class="setting-item">
            <label>„Éá„Éê„ÉÉ„Ç∞„Åò„Çá„ÅÜ„Åª„ÅÜ</label>
            <button id="debugInfoToggle" class="toggle-button">OFF</button>
          </div>
          <div class="setting-item debug-section">
            <label>„Éá„Éê„ÉÉ„Ç∞Ê©üËÉΩ</label>
            <div class="debug-buttons">
              <button id="addTestDataButton" class="debug-button">
                „ÉÜ„Çπ„Éà„Éá„Éº„ÇøÁîüÊàê
              </button>
              <button id="addTestScoreButton" class="debug-button">
                „ÉÜ„Çπ„Éà„Çπ„Ç≥„Ç¢ËøΩÂä†
              </button>
              <button id="resetScoreButton" class="debug-button">
                „Çπ„Ç≥„Ç¢„É™„Çª„ÉÉ„Éà
              </button>
            </div>
          </div>
        </div>
        <button id="settingsBackButton" class="game-button secondary">
          „ÇÇ„Å©„Çã
        </button>
      </div>
    </div>

    <!-- JavaScriptË™≠„ÅøËæº„ÅøÔºàÂêåÊúü„ÉªÈ†ÜÂ∫è‰øùË®ºÔºâ -->
    <script src="js/storage.js?v=62"></script>
    <script src="js/player.js?v=62"></script>
    <script src="js/stage.js?v=62"></script>
    <script src="js/goal-animation.js?v=62"></script>
    <script src="js/game-simple.js?v=62"></script>
    <script src="js/ui.js?v=62"></script>

    <!-- UIManagerÂàùÊúüÂåñ -->
    <script>
      document.addEventListener("DOMContentLoaded", () => {
        if (typeof UIManager !== "undefined") {
          window.uiManager = new UIManager();
        }
      });
    </script>
  </body>
</html>
